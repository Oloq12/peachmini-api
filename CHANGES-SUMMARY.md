# üìù –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–æ—Ç–∞ —Å WebApp

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/app`
**–ì–¥–µ**: `bot/index.cjs` (—Å—Ç—Ä–æ–∫–∏ 545-563)

–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å web_app –∫–Ω–æ–ø–∫–æ–π:
- –ö–Ω–æ–ø–∫–∞ "üöÄ –û—Ç–∫—Ä—ã—Ç—å Peachmini" - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebApp
- –ö–Ω–æ–ø–∫–∞ "üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é" - –≤–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- URL —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `WEBAPP_URL` –≤ `.env`

### 2Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/start`
**–ì–¥–µ**: `bot/index.cjs` (—Å—Ç—Ä–æ–∫–∏ 597-623)

–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–æ–±–∞–≤–ª–µ–Ω–∞ web_app –∫–Ω–æ–ø–∫–∞:
- –¢–µ–ø–µ—Ä—å —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `/start` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è WebApp
- –ö–Ω–æ–ø–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É –º–µ–Ω—é (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞)

### 3Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
**–ì–¥–µ**: `bot/index.cjs` (—Å—Ç—Ä–æ–∫–∏ 1317-1340)

–ö–Ω–æ–ø–∫–∞ "üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é" —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.

### 4Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–æ –º–µ–Ω—é –∫–æ–º–∞–Ω–¥
**–ì–¥–µ**: `bot/index.cjs` (—Å—Ç—Ä–æ–∫–∏ 1510-1517)

–ö–æ–º–∞–Ω–¥–∞ `/app` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–µ–Ω—é –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞ (–≤–∏–¥–Ω–∞ –≤ —Å–ø–∏—Å–∫–µ –∫–æ–º–∞–Ω–¥).

### 5Ô∏è‚É£ –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- `ENV-SETUP.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ `.env`
- `TELEGRAM-BOT-WEBAPP-INTEGRATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `CHANGES-SUMMARY.md` - —ç—Ç–∞ —Å–≤–æ–¥–∫–∞

---

## üìù –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

### –í `bot/index.cjs`:

#### –°—Ç—Ä–æ–∫–∏ 545-563 (–ù–û–í–´–ï):
```javascript
bot.command('app', async ctx => {
  const webappUrl = process.env.WEBAPP_URL || 'http://localhost:5173';
  await ctx.reply(
    `üöÄ –û–¢–ö–†–´–¢–¨ PEACHMINI WEB APP\n\n...`,
    Markup.keyboard([
      [Markup.button.webApp('üöÄ –û—Ç–∫—Ä—ã—Ç—å Peachmini', webappUrl)],
      ['üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é']
    ]).resize()
  );
});
```

#### –°—Ç—Ä–æ–∫–∞ 598 (–ù–û–í–ê–Ø):
```javascript
const webappUrl = process.env.WEBAPP_URL || 'http://localhost:5173';
```

#### –°—Ç—Ä–æ–∫–∞ 606 (–ù–û–í–ê–Ø):
```javascript
[Markup.button.webApp('üöÄ –û—Ç–∫—Ä—ã—Ç—å Peachmini', webappUrl)],
```

#### –°—Ç—Ä–æ–∫–∏ 1317-1340 (–ù–û–í–´–ï):
```javascript
if (message === 'üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é') {
  // ... –∫–æ–¥ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ ...
}
```

#### –°—Ç—Ä–æ–∫–∞ 1511 (–ù–û–í–ê–Ø):
```javascript
{ command: 'app', description: 'üöÄ –û—Ç–∫—Ä—ã—Ç—å Peachmini (Web App)' },
```

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`:

```bash
cd /Users/egor/Desktop/peach-mini
nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤ `.env`:

```env
BOT_TOKEN=your_bot_token_here
WEBAPP_URL=http://localhost:5173
ADMIN_ID=your_telegram_id
PB_URL=http://127.0.0.1:8090
```

### 3. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å WebApp
cd vite-project
npm run dev

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å ngrok
ngrok http 5173

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å HTTPS URL –∏ –æ–±–Ω–æ–≤–∏—Ç—å .env:
# WEBAPP_URL=https://xxxx.ngrok-free.app
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞:

```bash
cd bot
node index.cjs
```

---

## üéØ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/start`
   - ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "üöÄ –û—Ç–∫—Ä—ã—Ç—å Peachmini" –≤ –º–µ–Ω—é

2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/app`
   - ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å web_app –∫–Ω–æ–ø–∫–æ–π

3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "üöÄ –û—Ç–∫—Ä—ã—Ç—å Peachmini"
   - ‚úÖ –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è WebApp (–µ—Å–ª–∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω –∏–ª–∏ —á–µ—Ä–µ–∑ ngrok)

4. –ù–∞–∂–º–∏—Ç–µ "üîô –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"
   - ‚úÖ –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è production**
   - Telegram WebApp —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å HTTPS URL
   - –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è WEBAPP_URL**
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ `.env` —Ñ–∞–π–ª–µ
   - –§–æ—Ä–º–∞—Ç: –ø–æ–ª–Ω—ã–π URL —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º
   - –ü—Ä–∏–º–µ—Ä: `https://your-app.vercel.app`

3. **–ù–µ –∑–∞–±—É–¥—å—Ç–µ**
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env`
   - –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å WebApp (vite-project)
   - –û–±–Ω–æ–≤–∏—Ç—å `WEBAPP_URL` –≤ `.env` –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **–î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫**: ~90
- **–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: 1 (`bot/index.cjs`)
- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤**: 3 (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- **–ù–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥**: 1 (`/app`)
- **–ù–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫**: 2 (web_app –∫–Ω–æ–ø–∫–∞ + "–ù–∞–∑–∞–¥")
- **–°–ª–æ–º–∞–Ω–Ω—ã—Ö —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤**: 0 ‚úÖ

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤–∞—à Telegram –±–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å WebApp!

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:**
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—å WebApp —á–µ—Ä–µ–∑ `/start` (–∫–Ω–æ–ø–∫–∞ –≤ –º–µ–Ω—é)
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—å WebApp —á–µ—Ä–µ–∑ `/app` (–æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞)
- ‚úÖ –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å 5 —Å–µ–∫—Ü–∏—è–º–∏

**–í—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ!** ‚úÖ

---

Made with üíú for Telegram Mini Apps

