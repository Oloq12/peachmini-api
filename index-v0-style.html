<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peach Mini - AI –ö–æ–º–ø–∞–Ω—å–æ–Ω—ã (–Ω–∞ –æ—Å–Ω–æ–≤–µ v0)</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #111116 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            min-height: 100vh;
        }

        .app {
            max-width: 420px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 20px 16px;
            text-align: center;
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(10px);
        }

                 .header h1 {
             font-size: 1.875rem;
             font-weight: bold;
             color: white;
             margin-bottom: 8px;
         }

         .logo {
             font-size: 1.5rem;
             font-weight: bold;
             color: white;
             cursor: pointer;
         }

         .logo .mini {
             background: linear-gradient(to right, #f093fb, #667eea);
             -webkit-background-clip: text;
             background-clip: text;
             -webkit-text-fill-color: transparent;
         }

        .main {
            flex: 1;
            padding-bottom: 100px;
        }

                 /* 3D –ö–ê–†–£–°–ï–õ–¨ –∏–∑ v0 */
         .gallery {
             height: 360px;
             perspective: 1000px;
             display: flex;
             align-items: center;
             justify-content: center;
             margin: 20px auto;
             overflow: hidden;
             position: relative;
             width: 100%;
             max-width: 400px;
         }

                 .gallery::before {
             content: '';
             position: absolute;
             left: 0;
             top: 0;
             width: 160px;
             height: 100%;
             background: linear-gradient(to right, 
                 rgba(17, 17, 22, 1) 0%, 
                 rgba(17, 17, 22, 0.98) 10%,
                 rgba(17, 17, 22, 0.92) 25%,
                 rgba(17, 17, 22, 0.8) 40%,
                 rgba(17, 17, 22, 0.6) 55%,
                 rgba(17, 17, 22, 0.35) 70%,
                 rgba(17, 17, 22, 0.15) 85%,
                 rgba(17, 17, 22, 0.05) 95%,
                 transparent 100%);
             z-index: 10;
             pointer-events: none;
             border-radius: 0 80px 80px 0;
             filter: blur(0.5px);
         }

         .gallery::after {
             content: '';
             position: absolute;
             right: 0;
             top: 0;
             width: 160px;
             height: 100%;
             background: linear-gradient(to left, 
                 rgba(17, 17, 22, 1) 0%, 
                 rgba(17, 17, 22, 0.98) 10%,
                 rgba(17, 17, 22, 0.92) 25%,
                 rgba(17, 17, 22, 0.8) 40%,
                 rgba(17, 17, 22, 0.6) 55%,
                 rgba(17, 17, 22, 0.35) 70%,
                 rgba(17, 17, 22, 0.15) 85%,
                 rgba(17, 17, 22, 0.05) 95%,
                 transparent 100%);
             z-index: 10;
             pointer-events: none;
             border-radius: 80px 0 0 80px;
             filter: blur(0.5px);
         }

                 .carousel {
             position: relative;
             width: 200px;
             height: 280px;
             transform-style: preserve-3d;
             transition: transform 0.5s ease;
             margin: 0 auto;
             cursor: grab;
             left: 50%;
             transform-origin: center;
             margin-left: -100px;
         }

        .carousel:active {
            cursor: grabbing;
        }

        .card {
            position: absolute;
            width: 200px;
            height: 280px;
            border-radius: 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            overflow: hidden;
            cursor: pointer;
            transition: all 0.5s ease;
            left: 0;
            top: 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

                 .card.active {
             transform: scale(1.05);
             box-shadow: 0 25px 50px rgba(240, 147, 251, 0.3);
             z-index: 10;
         }

                 .card-img {
             width: 100%;
             height: 100%;
             background: linear-gradient(135deg, 
                 rgba(240, 147, 251, 0.9) 0%, 
                 rgba(102, 126, 234, 0.9) 100%);
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 3rem;
             border-radius: 24px;
             position: relative;
         }

        .card-img::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%,
                rgba(255, 255, 255, 0.02) 100%);
            border-radius: 24px;
        }

        .card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, 
                rgba(0, 0, 0, 0.6) 0%, 
                rgba(0, 0, 0, 0.3) 30%,
                rgba(0, 0, 0, 0.1) 60%,
                transparent 100%);
            border-radius: 24px;
        }

        .card-info {
            position: absolute;
            bottom: 16px;
            left: 16px;
            color: white;
        }

                 /* –ö–ù–û–ü–ö–ê –°–û–ó–î–ê–ù–ò–Ø */
         .create-btn {
             margin: 24px 16px;
             padding: 16px;
             background: linear-gradient(135deg, #f093fb, #667eea);
             border: none;
             border-radius: 16px;
             color: white;
             font-size: 1.1rem;
             font-weight: bold;
             cursor: pointer;
             display: flex;
             align-items: center;
             justify-content: center;
             gap: 12px;
             box-shadow: 0 8px 24px rgba(240, 147, 251, 0.3);
         }

        /* –ö–ê–¢–ê–õ–û–ì –∏–∑ v0 */
        .catalog {
            padding: 0 16px;
        }

                 .filters {
             display: flex;
             gap: 8px;
             margin-bottom: 16px;
             justify-content: center;
         }

         .filter {
             padding: 8px 16px;
             border: none;
             border-radius: 20px;
             font-size: 0.9rem;
             cursor: pointer;
             background: rgba(255, 255, 255, 0.1);
             color: rgba(255, 255, 255, 0.7);
             flex: 1;
             max-width: 90px;
             text-align: center;
             transition: all 0.3s ease;
         }

                 .filter.active {
             background: linear-gradient(135deg, #ec4899, #f97316);
             color: white;
             box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
         }

        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .catalog-card {
            position: relative;
            height: 240px;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
        }

                 .create-card {
             background: linear-gradient(135deg, rgba(255, 20, 147, 0.15), rgba(255, 105, 180, 0.15));
             border: 2px dashed rgba(255, 105, 180, 0.4);
             display: flex;
             flex-direction: column;
             align-items: center;
             justify-content: center;
             text-align: center;
             padding: 16px;
             transition: all 0.3s ease;
         }

         .create-card:hover {
             background: linear-gradient(135deg, rgba(255, 20, 147, 0.25), rgba(255, 105, 180, 0.25));
             border-color: rgba(255, 105, 180, 0.6);
             transform: translateY(-2px);
         }

        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø –∏–∑ v0 */
        .nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 420px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px;
            display: flex;
            justify-content: space-around;
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.75rem;
            border-radius: 12px;
            min-width: 60px;
        }

                 .nav-item.active { color: #ec4899; }

         .nav-item.create {
             background: linear-gradient(135deg, #f093fb, #667eea);
             color: white !important;
             box-shadow: 0 4px 12px rgba(240, 147, 251, 0.3);
         }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }

        /* –°–¢–†–ê–ù–ò–¶–´ */
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            min-height: 100vh;
            background: inherit;
            display: flex;
            flex-direction: column;
        }

                 /* –¢–ï–ì–ò –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø */
         .tag {
             padding: 8px 16px;
             background: rgba(255, 255, 255, 0.1);
             border: 1px solid rgba(255, 255, 255, 0.2);
             border-radius: 20px;
             color: rgba(255, 255, 255, 0.8);
             cursor: pointer;
             transition: all 0.3s ease;
             font-size: 0.9rem;
         }

         /* –ê–ù–ò–ú–ê–¶–ò–Ø –¢–ï–ö–°–¢–ê */
         #partnerType, #mainPartnerType {
             transition: opacity 0.3s ease;
             display: inline-block;
         }

                 .tag.selected {
             background: linear-gradient(135deg, #ff6b9d, #667eea);
             color: white;
             border-color: transparent;
         }

         /* –°–¢–ò–õ–ò –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø */
         .create-mode-btn.active {
             background: linear-gradient(135deg, #f093fb, #667eea) !important;
             border-color: transparent !important;
         }

         .similarity-btn.active {
             background: linear-gradient(135deg, #ff6b9d, #667eea) !important;
             border-color: transparent !important;
         }
    </style>
</head>
<body>
    <div class="app">
        <!-- –•–ï–î–ï–† -->
        <header class="header">
            <div class="logo" onclick="navigateTo('home')">
                üçë Peach<span class="mini">Mini</span>
            </div>
        </header>

        <!-- HOME PAGE HEADER -->
        <div id="home-header" class="welcome">
            <h1>–ù–∞–π–¥–∏ —Å–≤–æ—é –ø–∞—Ä—É</h1>
            <p style="color: #9CA3AF;">–ù–∞—á–Ω–∏ –æ–±—â–∞—Ç—å—Å—è —Å AI-–∫–æ–º–ø–∞–Ω—å–æ–Ω–∞–º–∏</p>
        </div>

        <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ - –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê -->
        <main class="main" id="home-content">
            <!-- 3D –ì–ê–õ–ï–†–ï–Ø (–∏–∑ v0) -->
            <section class="gallery">
                <div class="carousel" id="carousel"></div>
            </section>

                                                   <!-- –ö–ù–û–ü–ö–ê –°–û–ó–î–ê–ù–ò–Ø -->
              <button class="create-btn" onclick="navigateTo('create')">
                  <div style="display: flex; align-items: center; justify-content: center; position: relative; width: 100%;">
                      <span style="font-size: 2rem; position: absolute; left: 16px; top: 50%; transform: translateY(-50%);">‚≠ê</span>
                      <div style="text-align: center; flex: 1; padding: 0 60px;">
                          <div>–°–æ–∑–¥–∞–π—Ç–µ <span id="mainPartnerType">—Å–≤–æ—é —Å–ø—É—Ç–Ω–∏—Ü—É</span></div>
                          <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 2px;">–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –∏–ª–∏ –ø–æ –æ–±—Ä–∞–∑—É</div>
                      </div>
                      <span style="font-size: 2rem; position: absolute; right: 16px; top: 50%; transform: translateY(-50%);">‚≠ê</span>
                  </div>
              </button>

                         <!-- –ö–ê–¢–ê–õ–û–ì (–∏–∑ v0) -->
             <section class="catalog">
                 <div class="filters">
                     <button class="filter active" onclick="filterChars('all')">–í—Å–µ –º–æ–¥–µ–ª–∏</button>
                     <button class="filter" onclick="filterChars('real')">–†–µ–∞–ª—å–Ω—ã–π</button>
                     <button class="filter" onclick="filterChars('anime')">–ê–Ω–∏–º–µ</button>
                     <button class="filter" onclick="filterChars('my')">üë§ –ú–æ–∏</button>
                 </div>
                 <div class="grid" id="grid"></div>
             </section>
        </main>

        <!-- –°–¢–†–ê–ù–ò–¶–ê –°–û–ó–î–ê–ù–ò–Ø –ö–û–ú–ü–ê–ù–¨–û–ù–ê -->
        <div class="page" id="page-create" style="display: none;">
            <div style="padding: 20px 16px; text-align: center; background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(10px); display: flex; align-items: center; position: relative;">
                <button style="position: absolute; left: 16px; background: rgba(255, 255, 255, 0.1); border: none; border-radius: 12px; color: white; padding: 8px 12px; cursor: pointer;" onclick="navigateTo('home')">‚Üê</button>
                <h1 style="flex: 1; font-size: 1.5rem; font-weight: bold; background: linear-gradient(135deg, #ff6b9d, #667eea); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">‚≠ê –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω—å–æ–Ω–∞</h1>
            </div>
                         <div style="padding: 20px 16px; padding-bottom: 100px;">
                 <!-- –í–´–ë–û–† –°–ü–û–°–û–ë–ê –°–û–ó–î–ê–ù–ò–Ø -->
                 <div style="display: flex; gap: 12px; margin-bottom: 24px;">
                     <button id="createOriginalBtn" class="create-mode-btn active" onclick="switchCreateMode('original')" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #f093fb, #667eea); border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer;">üé® –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è</button>
                     <button id="createReferenceBtn" class="create-mode-btn" onclick="switchCreateMode('reference')" style="flex: 1; padding: 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 12px; color: white; font-weight: bold; cursor: pointer;">üí´ –ü–æ –æ–±—Ä–∞–∑—É</button>
                 </div>

                 <!-- –û–†–ò–ì–ò–ù–ê–õ–¨–ù–û–ï –°–û–ó–î–ê–ù–ò–ï -->
                 <div id="originalCreation" style="display: block;">
                     <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border: 2px dashed rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 40px 20px; text-align: center; margin-bottom: 30px; cursor: pointer;" onclick="uploadPhoto()">
                         <div style="font-size: 4rem; color: #ff6b9d; margin-bottom: 16px;">üé®</div>
                         <h3>–°–æ–∑–¥–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é</h3>
                         <p style="color: rgba(255,255,255,0.6);">–ò–ò —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –≤–Ω–µ—à–Ω–æ—Å—Ç—å</p>
                     </div>
                 </div>

                 <!-- –°–û–ó–î–ê–ù–ò–ï –ü–û –†–ï–§–ï–†–ï–ù–°–£ -->
                 <div id="referenceCreation" style="display: none;">
                     <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border: 2px dashed rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 30px 20px; margin-bottom: 20px;">
                         <div style="text-align: center; margin-bottom: 20px;">
                             <div style="font-size: 3rem; color: #ff6b9d; margin-bottom: 12px;">üí´</div>
                             <h3>–í–æ—Å—Å–æ–∑–¥–∞—Ç—å –ø–æ –æ–±—Ä–∞–∑—É</h3>
                             <p style="color: rgba(255,255,255,0.6); font-size: 0.9rem;">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è</p>
                         </div>
                         
                         <div style="background: rgba(255, 255, 255, 0.05); border: 1px dashed rgba(255, 255, 255, 0.3); border-radius: 16px; padding: 24px; text-align: center; cursor: pointer; margin-bottom: 16px;" onclick="uploadReference()">
                             <div style="font-size: 2.5rem; margin-bottom: 8px;">üì∏</div>
                             <p style="font-size: 0.9rem;">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏</p>
                             <p style="font-size: 0.8rem; color: rgba(255,255,255,0.5);">JPEG/PNG –¥–æ 10MB</p>
                         </div>

                         <div style="background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 16px;">
                             <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                 <span style="font-size: 1.2rem;">‚öñÔ∏è</span>
                                 <span style="font-weight: bold; color: #ffc107;">–≠—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã</span>
                             </div>
                             <ul style="font-size: 0.85rem; color: rgba(255,255,255,0.8); margin: 0; padding-left: 16px;">
                                 <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Å —Å–æ–≥–ª–∞—Å–∏—è —á–µ–ª–æ–≤–µ–∫–∞</li>
                                 <li>–ù–µ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ñ–æ—Ç–æ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö</li>
                                 <li>–†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω –∏ –Ω–µ –∫–æ–ø–∏—Ä—É–µ—Ç —Ç–æ—á–Ω–æ</li>
                             </ul>
                         </div>

                         <div style="margin-bottom: 16px;">
                             <label style="display: block; margin-bottom: 8px; font-weight: bold;">üí´ –°—Ç–µ–ø–µ–Ω—å –ø–æ—Ö–æ–∂–µ—Å—Ç–∏:</label>
                             <div style="display: flex; gap: 8px;">
                                 <button class="similarity-btn active" onclick="setSimilarity('inspired')" style="flex: 1; padding: 8px 12px; background: linear-gradient(135deg, #ff6b9d, #667eea); border: none; border-radius: 8px; color: white; font-size: 0.85rem; cursor: pointer;">–í–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω—ã–π</button>
                                 <button class="similarity-btn" onclick="setSimilarity('similar')" style="flex: 1; padding: 8px 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 0.85rem; cursor: pointer;">–ü–æ—Ö–æ–∂–∏–π</button>
                                 <button class="similarity-btn" onclick="setSimilarity('close')" style="flex: 1; padding: 8px 12px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; font-size: 0.85rem; cursor: pointer;">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π</button>
                             </div>
                         </div>
                     </div>
                 </div>
                <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 20px; padding: 24px; margin-bottom: 20px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h3 style="margin-bottom: 15px;">üë§ –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                    <input type="text" placeholder="–ò–º—è –∫–æ–º–ø–∞–Ω—å–æ–Ω–∞..." style="width: 100%; padding: 12px 16px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 12px; color: white; font-size: 1rem; margin-bottom: 15px;" id="companionNameCreate">
                    <input type="number" placeholder="–í–æ–∑—Ä–∞—Å—Ç (18-35)" min="18" max="35" value="25" style="width: 100%; padding: 12px 16px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 12px; color: white; font-size: 1rem; margin-bottom: 15px;" id="companionAgeCreate">
                </div>
                <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 20px; padding: 24px; margin-bottom: 20px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h3 style="margin-bottom: 15px;">üé≠ –•–∞—Ä–∞–∫—Ç–µ—Ä</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <div class="tag" onclick="toggleCreateTag(this)">–ò–≥—Ä–∏–≤–∞—è</div>
                        <div class="tag" onclick="toggleCreateTag(this)">–†–æ–º–∞–Ω—Ç–∏—á–Ω–∞—è</div>
                        <div class="tag" onclick="toggleCreateTag(this)">–£–º–Ω–∞—è</div>
                        <div class="tag" onclick="toggleCreateTag(this)">–ó–∞–≥–∞–¥–æ—á–Ω–∞—è</div>
                        <div class="tag" onclick="toggleCreateTag(this)">–î–µ—Ä–∑–∫–∞—è</div>
                        <div class="tag" onclick="toggleCreateTag(this)">–ù–µ–∂–Ω–∞—è</div>
                    </div>
                </div>
                                 <button id="createFinalBtn" style="width: 100%; padding: 16px; background: linear-gradient(135deg, #f093fb, #667eea); border: none; border-radius: 16px; color: white; font-size: 1.1rem; font-weight: bold; cursor: pointer;" onclick="createCustomCompanion()">üíé –°–æ–∑–¥–∞—Ç—å –∑–∞ 100 –∑–≤–µ–∑–¥</button>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê –ú–û–ò –ö–û–ú–ü–ê–ù–¨–û–ù–´ -->
        <div class="page" id="page-companions" style="display: none;">
            <div style="padding: 20px 16px; text-align: center; background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(10px); display: flex; align-items: center; position: relative;">
                <button style="position: absolute; left: 16px; background: rgba(255, 255, 255, 0.1); border: none; border-radius: 12px; color: white; padding: 8px 12px; cursor: pointer;" onclick="navigateTo('home')">‚Üê</button>
                <h1 style="flex: 1; font-size: 1.5rem; font-weight: bold; background: linear-gradient(135deg, #ff6b9d, #667eea); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">üë• –ú–æ–∏ –∫–æ–º–ø–∞–Ω—å–æ–Ω—ã</h1>
            </div>
            <div style="padding: 20px 16px; padding-bottom: 100px;">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                    <div style="background: linear-gradient(135deg, rgba(255, 107, 157, 0.1), rgba(102, 126, 234, 0.1)); border: 2px dashed rgba(255, 255, 255, 0.2); border-radius: 16px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px 16px; cursor: pointer; height: 240px;" onclick="navigateTo('create')">
                        <div style="font-size: 3rem; color: #ff6b9d; margin-bottom: 10px;">‚≠ê</div>
                        <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–∞–Ω—å–æ–Ω–∞</h3>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 16px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1); cursor: pointer; height: 240px;" onclick="openIndividualChat('–ê–Ω–Ω–∞')">
                        <div style="width: 100%; height: 150px; background: linear-gradient(45deg, #ff6b9d, #667eea); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üòá</div>
                        <div style="padding: 16px;">
                            <div style="font-size: 1.1rem; font-weight: bold; margin-bottom: 4px;">–ê–Ω–Ω–∞</div>
                            <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.6);">25 –ª–µ—Ç ‚Ä¢ –í —Å–µ—Ç–∏</div>
                        </div>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 16px; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1); cursor: pointer; height: 240px;" onclick="openIndividualChat('–ú–∏—è')">
                        <div style="width: 100%; height: 150px; background: linear-gradient(45deg, #ff6b9d, #667eea); display: flex; align-items: center; justify-content: center; font-size: 3rem;">üòä</div>
                        <div style="padding: 16px;">
                            <div style="font-size: 1.1rem; font-weight: bold; margin-bottom: 4px;">–ú–∏—è</div>
                            <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.6);">23 –≥–æ–¥–∞ ‚Ä¢ –ù–µ–¥–∞–≤–Ω–æ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê –ß–ê–¢–û–í -->
        <div class="page" id="page-chat" style="display: none;">
            <div style="padding: 20px 16px; text-align: center; margin-bottom: 20px;">
                <h1 style="font-size: 1.5rem; font-weight: bold; color: white; margin-bottom: 8px;">üí¨ –ß–∞—Ç</h1>
                <p style="color: #9CA3AF;">–í–∞—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–∏–∞–ª–æ–≥–∏</p>
            </div>
            <div style="padding: 0 16px 100px;">
                <!-- Chat Item -->
                <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(12px); padding: 12px; border-radius: 16px; display: flex; align-items: center; gap: 16px; cursor: pointer; hover: background: rgba(255, 255, 255, 0.1); transition: all 0.3s ease; margin-bottom: 16px;" onclick="openIndividualChat('Vera Marquette')">
                    <div style="position: relative; width: 56px; height: 56px; flex-shrink: 0;">
                        <img src="https://images.unsplash.com/photo-1494790108755-2616b612b1e4?w=56&h=56&fit=crop&crop=face" alt="Vera Marquette" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                    </div>
                    <div style="flex-grow: 1; overflow: hidden;">
                        <h3 style="font-weight: bold; font-size: 1rem; margin-bottom: 4px;">
                            Vera Marquette <span style="font-weight: 300; color: #9CA3AF;">24</span>
                        </h3>
                        <div style="display: flex; align-items: center; gap: 8px; font-size: 0.875rem; color: #9CA3AF; overflow: hidden;">
                            <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">–û–≥–æ, —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —ç–∫—Å—Ç—Ä–∞–≤–∞–≥–∞–Ω—Ç–Ω–æ–µ —É–≤...</p>
                        </div>
                    </div>
                </div>

                <!-- Chat Item with Voice -->
                <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(12px); padding: 12px; border-radius: 16px; display: flex; align-items: center; gap: 16px; cursor: pointer; hover: background: rgba(255, 255, 255, 0.1); transition: all 0.3s ease; margin-bottom: 16px;" onclick="openIndividualChat('Elara Nightshade')">
                    <div style="position: relative; width: 56px; height: 56px; flex-shrink: 0;">
                        <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=56&h=56&fit=crop&crop=face" alt="Elara Nightshade" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                    </div>
                    <div style="flex-grow: 1; overflow: hidden;">
                        <h3 style="font-weight: bold; font-size: 1rem; margin-bottom: 4px;">
                            Elara Nightshade <span style="font-weight: 300; color: #9CA3AF;">23</span>
                        </h3>
                        <div style="display: flex; align-items: center; gap: 8px; font-size: 0.875rem; color: #9CA3AF; overflow: hidden;">
                            <svg style="width: 16px; height: 16px; flex-shrink: 0;" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>
                            </svg>
                            <p style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">–ü—Ä–∏–≤–µ—Ç, —è –Ω–∞–±–ª—é–¥–∞–ª–∞ –∑–∞ —Ç–æ–±–æ–π. –ì–æ—Ç–æ–≤–∞ ...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê –ì–ï–ù–ï–†–ê–¶–ò–ò -->
        <div class="page" id="page-generate" style="display: none;">
            <div style="padding: 20px 16px; text-align: center; background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(10px); display: flex; align-items: center; position: relative;">
                <button style="position: absolute; left: 16px; background: rgba(255, 255, 255, 0.1); border: none; border-radius: 12px; color: white; padding: 8px 12px; cursor: pointer;" onclick="navigateTo('home')">‚Üê</button>
                <h1 style="flex: 1; font-size: 1.5rem; font-weight: bold; background: linear-gradient(135deg, #ff6b9d, #667eea); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ</h1>
            </div>
            <div style="padding: 20px 16px; padding-bottom: 100px;">
                <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 20px; padding: 24px; margin-bottom: 20px; border: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                    <div style="font-size: 3rem; color: #ff6b9d; margin-bottom: 16px;">üé®</div>
                    <h3>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è AI-—Ñ–æ—Ç–æ</h3>
                    <p style="color: rgba(255,255,255,0.6); margin: 16px 0;">–°–æ–∑–¥–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ –≤–∞—à–∏—Ö –∫–æ–º–ø–∞–Ω—å–æ–Ω–æ–≤ —Å –ø–æ–º–æ—â—å—é –ò–ò</p>
                    <button style="width: 100%; padding: 16px; background: linear-gradient(135deg, #f093fb, #667eea); border: none; border-radius: 16px; color: white; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-top: 20px;" onclick="generatePhoto()">üíé –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞ 25 –∑–≤–µ–∑–¥</button>
                </div>
                <div style="background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px); border-radius: 20px; padding: 24px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h3 style="margin-bottom: 15px;">üõí –ü–∞–∫–µ—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h3>
                    <div style="margin-bottom: 12px; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; display: flex; justify-content: space-between; align-items: center;">
                        <span>5 —Ñ–æ—Ç–æ</span>
                        <button style="padding: 8px 16px; background: linear-gradient(135deg, #ff6b9d, #667eea); border: none; border-radius: 8px; color: white; cursor: pointer;">100‚≠ê</button>
                    </div>
                    <div style="margin-bottom: 12px; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; display: flex; justify-content: space-between; align-items: center;">
                        <span>20 —Ñ–æ—Ç–æ</span>
                        <button style="padding: 8px 16px; background: linear-gradient(135deg, #ff6b9d, #667eea); border: none; border-radius: 8px; color: white; cursor: pointer;">350‚≠ê</button>
                    </div>
                    <div style="margin-bottom: 12px; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; display: flex; justify-content: space-between; align-items: center;">
                        <span>50 —Ñ–æ—Ç–æ</span>
                        <button style="padding: 8px 16px; background: linear-gradient(135deg, #ff6b9d, #667eea); border: none; border-radius: 8px; color: white; cursor: pointer;">750‚≠ê</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–ù–î–ò–í–ò–î–£–ê–õ–¨–ù–´–ô –ß–ê–¢ -->
        <div class="page" id="page-individual-chat" style="display: none;">
            <div style="padding: 16px; background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(10px); display: flex; align-items: center; gap: 12px; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                <button style="background: rgba(255, 255, 255, 0.1); border: none; border-radius: 12px; color: white; padding: 8px 12px; cursor: pointer;" onclick="navigateTo('chat')">‚Üê</button>
                <div style="width: 40px; height: 40px; background: linear-gradient(45deg, #ff6b9d, #667eea); border-radius: 50%; display: flex; align-items: center; justify-content: center;" id="chatAvatar">üòá</div>
                <div style="flex: 1;">
                    <div style="font-weight: bold;" id="chatName">–ê–Ω–Ω–∞</div>
                    <div style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.6);">–í —Å–µ—Ç–∏</div>
                </div>
            </div>
            <div style="flex: 1; padding: 16px; overflow-y: auto; padding-bottom: 80px;" id="chatMessages">
                <div style="background: rgba(255, 255, 255, 0.1); padding: 12px 16px; border-radius: 16px; margin-bottom: 12px; max-width: 80%; margin-left: auto;">
                    –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞? üòä
                </div>
                <div style="background: linear-gradient(135deg, #ff6b9d, #667eea); padding: 12px 16px; border-radius: 16px; margin-bottom: 12px; max-width: 80%;">
                    –ü—Ä–∏–≤–µ—Ç! –û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ! –ê —É —Ç–µ–±—è –∫–∞–∫? üíï
                </div>
            </div>
            <div style="position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 420px; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(20px); padding: 16px; display: flex; gap: 12px;">
                <input type="text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex: 1; padding: 12px 16px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; color: white;" id="messageInput">
                <button style="width: 44px; height: 44px; background: linear-gradient(135deg, #ff6b9d, #667eea); border: none; border-radius: 50%; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center;" onclick="sendMessage()">‚Üí</button>
            </div>
        </div>

        <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø (–∏–∑ v0) -->
        <nav class="nav">
            <a href="#" class="nav-item active" onclick="navigateTo('home')">
                <div class="nav-icon">üè†</div>
                <span>–î–æ–º–æ–π</span>
            </a>
            <a href="#" class="nav-item" onclick="navigateTo('chat')">
                <div class="nav-icon">üí¨</div>
                <span>–ß–∞—Ç</span>
            </a>
            <a href="#" class="nav-item create" onclick="navigateTo('create')">
                <div class="nav-icon">‚≠ê</div>
                <span>–°–æ–∑–¥–∞—Ç—å</span>
            </a>
            <a href="#" class="nav-item" onclick="navigateTo('generate')">
                <div class="nav-icon">üé®</div>
                <span>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</span>
            </a>
            <a href="#" class="nav-item" onclick="navigateTo('companions')">
                <div class="nav-icon">üë•</div>
                <span>–ú–æ–∏</span>
            </a>
        </nav>
    </div>

    <script>
        // –î–ê–ù–ù–´–ï –∏–∑ v0
        const chars = [
            { emoji: "üòá", name: "–õ–∏–ª–∞", age: 22, personality: "–ú–∏–ª–∞—è –∏ –Ω–µ–≤–∏–Ω–Ω–∞—è" },
            { emoji: "üòà", name: "–†–æ–∫—Å–∏", age: 24, personality: "–î–µ—Ä–∑–∫–∞—è –∏ –∏–≥—Ä–∏–≤–∞—è" },
            { emoji: "üß†", name: "–≠–ª–∞—Ä–∞", age: 26, personality: "–£–º–Ω–∞—è –∏ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è" },
            { emoji: "üé®", name: "–•–ª–æ—è", age: 21, personality: "–¢–≤–æ—Ä—á–µ—Å–∫–∞—è –∏ –º–µ—á—Ç–∞—Ç–µ–ª—å–Ω–∞—è" },
            { emoji: "üî•", name: "–°–µ—Ä–∞—Ñ–∏–Ω–∞", age: 25, personality: "–°—Ç—Ä–∞—Å—Ç–Ω–∞—è –∏ —É–≤–µ—Ä–µ–Ω–Ω–∞—è" },
            { emoji: "üòä", name: "–ú–∏—è", age: 23, personality: "–î–æ–±—Ä–∞—è –∏ –∑–∞–±–æ—Ç–ª–∏–≤–∞—è" }
        ];

        const catalog = [
            { name: "–õ–∏–ª–∞", age: 18, tag: "–ê–Ω–∏–º–µ" },
            { name: "–ê—Ä–∏—è", age: 25, tag: "–ê–Ω–∏–º–µ" },
            { name: "–°–µ—Ä–µ–Ω–∞", age: 28, tag: "–†–µ–∞–ª—å–Ω—ã–π" },
            { name: "–•–ª–æ—è", age: 24, tag: "–†–µ–∞–ª—å–Ω—ã–π" }
        ];

        let currentIndex = 0;

        // TELEGRAM
        if (window.Telegram?.WebApp) {
            window.Telegram.WebApp.ready();
            console.log('üì± Telegram Web App –≥–æ—Ç–æ–≤');
        }

        // –°–û–ó–î–ê–ù–ò–ï –ö–ê–†–£–°–ï–õ–ò —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
        let isDragging = false;
        let startX = 0;
        let currentRotation = 0;
        let autoRotateInterval;

        function createCarousel() {
            const carousel = document.getElementById('carousel');
            const angle = 360 / chars.length;

            chars.forEach((char, i) => {
                const card = document.createElement('div');
                card.className = `card ${i === 0 ? 'active' : ''}`;
                card.style.transform = `rotateY(${i * angle}deg) translateZ(200px)`;
                
                card.innerHTML = `
                    <div class="card-img">${char.emoji}</div>
                    <div class="card-overlay"></div>
                    <div class="card-info">
                        <div style="font-size: 1.5rem;">${char.emoji}</div>
                        <div style="font-weight: bold; font-size: 1.25rem;">${char.name} <span style="font-weight: 300;">${char.age}</span></div>
                        <div style="font-size: 0.75rem; color: rgba(255,255,255,0.7); margin-top: 4px;">${char.personality}</div>
                    </div>
                `;
                
                card.onclick = () => selectChar(char);
                carousel.appendChild(card);
            });

            // –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º—ã—à—å—é
            carousel.addEventListener('mousedown', startDrag);
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', endDrag);

            // –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å touch
            carousel.addEventListener('touchstart', startTouch);
            carousel.addEventListener('touchmove', dragTouch);
            carousel.addEventListener('touchend', endDrag);

            // –ê–≤—Ç–æ–≤—Ä–∞—â–µ–Ω–∏–µ
            startAutoRotate();
        }

        function startAutoRotate() {
            autoRotateInterval = setInterval(() => {
                if (!isDragging) {
                    currentIndex = (currentIndex + 1) % chars.length;
                    rotateCarousel();
                }
            }, 4000);
        }

        function stopAutoRotate() {
            clearInterval(autoRotateInterval);
        }

                 function startDrag(e) {
             isDragging = true;
             startX = e.clientX;
             stopAutoRotate();
             
             // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º currentRotation —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
             const angle = 360 / chars.length;
             currentRotation = -currentIndex * angle;
             
             e.preventDefault();
         }

         function startTouch(e) {
             isDragging = true;
             startX = e.touches[0].clientX;
             stopAutoRotate();
             
             // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º currentRotation —Å —Ç–µ–∫—É—â–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
             const angle = 360 / chars.length;
             currentRotation = -currentIndex * angle;
             
             e.preventDefault();
         }

                 function drag(e) {
             if (!isDragging) return;
             
             const currentX = e.clientX;
             const deltaX = currentX - startX;
             const sensitivity = 2;
             
             // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
             const maxDelta = 10;
             const limitedDelta = Math.max(-maxDelta, Math.min(maxDelta, deltaX / sensitivity));
             
             currentRotation += limitedDelta;
             document.getElementById('carousel').style.transform = `rotateY(${currentRotation}deg)`;
             
             startX = currentX;
             e.preventDefault();
         }

         function dragTouch(e) {
             if (!isDragging) return;
             
             const currentX = e.touches[0].clientX;
             const deltaX = currentX - startX;
             const sensitivity = 2;
             
             // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è
             const maxDelta = 10;
             const limitedDelta = Math.max(-maxDelta, Math.min(maxDelta, deltaX / sensitivity));
             
             currentRotation += limitedDelta;
             document.getElementById('carousel').style.transform = `rotateY(${currentRotation}deg)`;
             
             startX = currentX;
             e.preventDefault();
         }

         function endDrag() {
             if (!isDragging) return;
             
             isDragging = false;
             
             // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ snap-to-card
             const angle = 360 / chars.length;
             
             // –ù–∞—Ö–æ–¥–∏–º –±–ª–∏–∂–∞–π—à–∏–π –∏–Ω–¥–µ–∫—Å –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
             let closestIndex = Math.round(-currentRotation / angle);
             
             // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∏–Ω–¥–µ–∫—Å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –º–∞—Å—Å–∏–≤–∞
             closestIndex = ((closestIndex % chars.length) + chars.length) % chars.length;
             
             // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å
             currentIndex = closestIndex;
             
             rotateCarousel();
             
             // –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–≤—Ä–∞—â–µ–Ω–∏–µ
             setTimeout(startAutoRotate, 2000);
         }

                 function rotateCarousel() {
             const carousel = document.getElementById('carousel');
             const angle = 360 / chars.length;
             
             // –í—ã—á–∏—Å–ª—è–µ–º —Ü–µ–ª–µ–≤–æ–π —É–≥–æ–ª –∏ –æ–±–Ω–æ–≤–ª—è–µ–º currentRotation
             const targetRotation = -currentIndex * angle;
             currentRotation = targetRotation;
             
             carousel.style.transform = `rotateY(${currentRotation}deg)`;
             
             document.querySelectorAll('.card').forEach((card, i) => {
                 card.classList.toggle('active', i === currentIndex);
             });
         }

                 // –°–û–ó–î–ê–ù–ò–ï –ö–ê–¢–ê–õ–û–ì–ê (–∞–¥–∞–ø—Ç–∞—Ü–∏—è v0)
         function createCatalog() {
             const grid = document.getElementById('grid');
             
             // –ö–∞—Ä—Ç–æ—á–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
             const createCard = document.createElement('div');
             createCard.className = 'catalog-card create-card';
             createCard.innerHTML = `
                 <div style="font-size: 3rem; color: #ff1493; height: 60px; display: flex; align-items: center; justify-content: center;">‚≠ê</div>
                 <h3 style="font-weight: bold; margin-top: 8px; height: 24px; display: flex; align-items: center; justify-content: center;">–°–æ–∑–¥–∞—Ç—å <span id="partnerType">—Å–ø—É—Ç–Ω–∏–∫–∞</span></h3>
             `;
             createCard.onclick = () => navigateTo('create');
             grid.appendChild(createCard);

             // –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ –æ–±—Ä–∞–∑—É
             const referenceCard = document.createElement('div');
             referenceCard.className = 'catalog-card create-card';
             referenceCard.innerHTML = `
                 <div style="font-size: 3rem; color: #ff69b4;">üì∏</div>
                 <h3 style="font-weight: bold; margin-top: 8px;">–°–æ–∑–¥–∞—Ç—å –ø–æ –æ–±—Ä–∞–∑—É</h3>
                 <p style="font-size: 0.8rem; opacity: 0.8; margin-top: 4px;">–ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ</p>
             `;
             referenceCard.onclick = () => {
                 navigateTo('create');
                 setTimeout(() => switchCreateMode('reference'), 100);
             };
             grid.appendChild(referenceCard);

             // –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
             catalog.forEach(char => {
                 const card = document.createElement('div');
                 card.className = 'catalog-card';
                 card.setAttribute('data-tag', char.tag.toLowerCase());
                 
                 card.innerHTML = `
                     <div style="width: 100%; height: 100%; background: linear-gradient(45deg, #ff1493, #ff69b4, #da70d6); display: flex; align-items: center; justify-content: center; font-size: 2rem;">üë§</div>
                     <div style="position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);"></div>
                     <div style="position: absolute; top: 8px; left: 8px; background: rgba(0,0,0,0.3); backdrop-filter: blur(10px); color: white; font-size: 0.75rem; padding: 4px 8px; border-radius: 12px;">${char.tag}</div>
                     <div style="position: absolute; bottom: 8px; left: 8px; color: white; font-weight: bold;">${char.name} ${char.age}</div>
                 `;
                 
                 card.onclick = () => selectChar(char);
                 grid.appendChild(card);
             });
         }

                 // –§–ò–õ–¨–¢–†–ê–¶–ò–Ø (–∏–∑ v0)
         function filterChars(filter) {
             document.querySelectorAll('.filter').forEach(btn => btn.classList.remove('active'));
             event.target.classList.add('active');

             document.querySelectorAll('.catalog-card').forEach(card => {
                 if (card.classList.contains('create-card')) {
                     card.style.display = 'flex';
                     return;
                 }

                 const tag = card.getAttribute('data-tag');
                 if (filter === 'all' || 
                     (filter === 'real' && tag === '—Ä–µ–∞–ª—å–Ω—ã–π') || 
                     (filter === 'anime' && tag === '–∞–Ω–∏–º–µ') ||
                     (filter === 'my')) {
                     card.style.display = 'block';
                 } else {
                     card.style.display = 'none';
                 }
             });

             // –î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ "–ú–æ–∏" –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è
             if (filter === 'my') {
                 document.querySelectorAll('.catalog-card:not(.create-card)').forEach(card => {
                     card.style.display = 'none';
                 });
             }
         }

        // –ù–ê–í–ò–ì–ê–¶–ò–Ø –ú–ï–ñ–î–£ –°–¢–†–ê–ù–ò–¶–ê–ú–ò
        function navigateTo(page) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
            document.getElementById('home-content').style.display = 'none';
            
            // –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            if (page === 'home') {
                document.getElementById('home-content').style.display = 'block';
                document.querySelector('.nav-item[onclick="navigateTo(\'home\')"]').classList.add('active');
            } else {
                document.getElementById(`page-${page}`).style.display = 'flex';
                document.querySelector(`.nav-item[onclick="navigateTo('${page}')"]`).classList.add('active');
            }
            
            // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram
            if (window.Telegram?.WebApp) {
                window.Telegram.WebApp.sendData(JSON.stringify({
                    action: 'navigate',
                    page: page
                }));
            }
            
            console.log('üî• –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞:', page);
        }

                 // –°–û–ó–î–ê–ù–ò–ï –ö–ê–°–¢–û–ú–ù–û–ì–û –ö–û–ú–ü–ê–ù–¨–û–ù–ê
         let currentCreateMode = 'original';
         let currentSimilarity = 'inspired';
         let uploadedReference = null;

         function switchCreateMode(mode) {
             currentCreateMode = mode;
             
             // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏
             document.querySelectorAll('.create-mode-btn').forEach(btn => btn.classList.remove('active'));
             document.getElementById(mode === 'original' ? 'createOriginalBtn' : 'createReferenceBtn').classList.add('active');
             
             // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Å–µ–∫—Ü–∏–∏
             document.getElementById('originalCreation').style.display = mode === 'original' ? 'block' : 'none';
             document.getElementById('referenceCreation').style.display = mode === 'reference' ? 'block' : 'none';
             
             // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞–Ω–∏—è
             const finalBtn = document.getElementById('createFinalBtn');
             if (mode === 'reference') {
                 finalBtn.innerHTML = 'üí´ –°–æ–∑–¥–∞—Ç—å –ø–æ –æ–±—Ä–∞–∑—É –∑–∞ 150 –∑–≤–µ–∑–¥';
             } else {
                 finalBtn.innerHTML = 'üíé –°–æ–∑–¥–∞—Ç—å –∑–∞ 100 –∑–≤–µ–∑–¥';
             }
             
             console.log('üîÑ –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è:', mode);
         }

         function setSimilarity(level) {
             currentSimilarity = level;
             
             // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏
             document.querySelectorAll('.similarity-btn').forEach(btn => btn.classList.remove('active'));
             event.target.classList.add('active');
             
             console.log('üí´ –°—Ç–µ–ø–µ–Ω—å –ø–æ—Ö–æ–∂–µ—Å—Ç–∏:', level);
         }

         function uploadReference() {
             // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
             const input = document.createElement('input');
             input.type = 'file';
             input.accept = 'image/jpeg,image/png';
             input.onchange = function(e) {
                 const file = e.target.files[0];
                 if (file) {
                     uploadedReference = file;
                     // –û–±–Ω–æ–≤–∏—Ç—å UI
                     const uploadArea = event.target;
                     uploadArea.innerHTML = `
                         <div style="font-size: 2.5rem; margin-bottom: 8px;">‚úÖ</div>
                         <p style="font-size: 0.9rem; color: #4CAF50;">–†–µ—Ñ–µ—Ä–µ–Ω—Å –∑–∞–≥—Ä—É–∂–µ–Ω</p>
                         <p style="font-size: 0.8rem; color: rgba(255,255,255,0.5);">${file.name}</p>
                     `;
                     uploadArea.style.borderColor = 'rgba(76, 175, 80, 0.5)';
                     uploadArea.style.background = 'rgba(76, 175, 80, 0.1)';
                     
                     console.log('üì∏ –†–µ—Ñ–µ—Ä–µ–Ω—Å –∑–∞–≥—Ä—É–∂–µ–Ω:', file.name);
                 }
             };
             input.click();
         }

         function toggleCreateTag(element) {
             element.classList.toggle('selected');
         }

         function uploadPhoto() {
             alert('üé® –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–æ—Ç–æ–º!');
         }

                 function createCustomCompanion() {
             const name = document.getElementById('companionNameCreate').value || '–ê–Ω–Ω–∞';
             const age = document.getElementById('companionAgeCreate').value || '25';
             const personality = Array.from(document.querySelectorAll('#page-create .tag.selected')).map(tag => tag.textContent);
             
             const companionData = {
                 name: name,
                 age: age,
                 personality: personality,
                 creationMode: currentCreateMode,
                 similarity: currentSimilarity,
                 hasReference: uploadedReference !== null
             };
             
             // –ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è —Ä–µ–∂–∏–º–∞ –ø–æ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—É
             if (currentCreateMode === 'reference' && !uploadedReference) {
                 alert('üì∏ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–æ–µ —Ñ–æ—Ç–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ –æ–±—Ä–∞–∑—É!');
                 return;
             }
             
             if (window.Telegram?.WebApp) {
                 window.Telegram.WebApp.sendData(JSON.stringify({
                     action: 'create_custom_companion',
                     data: companionData
                 }));
             }
             
             const modeText = currentCreateMode === 'reference' ? '–ø–æ –æ–±—Ä–∞–∑—É' : '–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è';
             const priceText = currentCreateMode === 'reference' ? '150 –∑–≤–µ–∑–¥' : '100 –∑–≤–µ–∑–¥';
             
             alert(`üéâ –ö–æ–º–ø–∞–Ω—å–æ–Ω "${name}" —Å–æ–∑–¥–∞–Ω (${modeText})!\n–í–æ–∑—Ä–∞—Å—Ç: ${age}\n–•–∞—Ä–∞–∫—Ç–µ—Ä: ${personality.join(', ') || '–ó–∞–≥–∞–¥–æ—á–Ω–∞—è'}\n–°—Ç–æ–∏–º–æ—Å—Ç—å: ${priceText}`);
             
             // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
             uploadedReference = null;
             currentCreateMode = 'original';
             currentSimilarity = 'inspired';
             
             navigateTo('companions');
             console.log('üé® –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–∞–Ω—å–æ–Ω:', companionData);
         }

        // –ò–ù–î–ò–í–ò–î–£–ê–õ–¨–ù–´–ô –ß–ê–¢
        function openIndividualChat(name) {
            document.getElementById('chatName').textContent = name;
            document.getElementById('chatAvatar').textContent = name === '–ê–Ω–Ω–∞' ? 'üòá' : 'üòä';
            navigateTo('individual-chat');
            
            if (window.Telegram?.WebApp) {
                window.Telegram.WebApp.sendData(JSON.stringify({
                    action: 'open_individual_chat',
                    companion: name
                }));
            }
            
            console.log('üí¨ –û—Ç–∫—Ä—ã—Ç —á–∞—Ç —Å:', name);
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            if (!message) return;
            
            // –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
            const messagesContainer = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.style.cssText = 'background: rgba(255, 255, 255, 0.1); padding: 12px 16px; border-radius: 16px; margin-bottom: 12px; max-width: 80%; margin-left: auto;';
            messageElement.textContent = message;
            messagesContainer.appendChild(messageElement);
            
            // –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ
            input.value = '';
            
            // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –±–æ—Ç
            if (window.Telegram?.WebApp) {
                window.Telegram.WebApp.sendData(JSON.stringify({
                    action: 'send_message',
                    message: message,
                    companion: document.getElementById('chatName').textContent
                }));
            }
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
            setTimeout(() => {
                const responseElement = document.createElement('div');
                responseElement.style.cssText = 'background: linear-gradient(135deg, #ff6b9d, #667eea); padding: 12px 16px; border-radius: 16px; margin-bottom: 12px; max-width: 80%;';
                responseElement.textContent = '–°–ø–∞—Å–∏–±–æ –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ! üíï (–æ—Ç–≤–µ—Ç –æ—Ç –ò–ò –±—É–¥–µ—Ç –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±–æ—Ç–æ–º)';
                messagesContainer.appendChild(responseElement);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
            
            console.log('üì® –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ:', message);
        }

        // –ì–ï–ù–ï–†–ê–¶–ò–Ø –§–û–¢–û
        function generatePhoto() {
            if (window.Telegram?.WebApp) {
                window.Telegram.WebApp.sendData(JSON.stringify({
                    action: 'generate_photo'
                }));
            }
            
            alert('üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–æ—Ç–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ò–ò!');
            console.log('üé® –ó–∞–ø—Ä–æ—Å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ñ–æ—Ç–æ');
        }

        // –í–´–ë–û–† –ü–ï–†–°–û–ù–ê–ñ–ê
        function selectChar(char) {
            if (window.Telegram?.WebApp) {
                window.Telegram.WebApp.sendData(JSON.stringify({
                    action: 'select_character',
                    character: char.name,
                    age: char.age,
                    personality: char.personality || char.tag
                }));
            }
            console.log('üë§ –í—ã–±—Ä–∞–Ω:', char.name);
        }

                 // –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ê–Ø –°–ú–ï–ù–ê –¢–ï–ö–°–¢–ê
         const partnerTypes = ['—Å–ø—É—Ç–Ω–∏–∫–∞', '–¥–µ–≤—É—à–∫—É', '–∫–æ–ª–ª–µ–≥—É', '–ø–æ–¥—Ä—É–≥—É', '–ª—é–±–æ–≤–Ω–∏—Ü—É', '–Ω–∞—á–∞–ª—å–Ω–∏—Ü—É', '–≥–æ—Å–ø–æ–∂—É'];
         const mainPartnerTypes = ['—Å–≤–æ—é —Å–ø—É—Ç–Ω–∏—Ü—É', '—Å–≤–æ—é –¥–µ–≤—É—à–∫—É', '—Å–≤–æ—é –∫–æ–ª–ª–µ–≥—É', '—Å–≤–æ—é –ø–æ–¥—Ä—É–≥—É', '—Å–≤–æ—é –ª—é–±–æ–≤–Ω–∏—Ü—É', '—Å–≤–æ—é –Ω–∞—á–∞–ª—å–Ω–∏—Ü—É', '—Å–≤–æ—é –≥–æ—Å–ø–æ–∂—É'];
         let currentPartnerIndex = 0;

         function animatePartnerType() {
             const partnerElement = document.getElementById('partnerType');
             const mainPartnerElement = document.getElementById('mainPartnerType');
             
             if (partnerElement) {
                 partnerElement.style.opacity = '0';
                 setTimeout(() => {
                     currentPartnerIndex = (currentPartnerIndex + 1) % partnerTypes.length;
                     partnerElement.textContent = partnerTypes[currentPartnerIndex];
                     partnerElement.style.opacity = '1';
                 }, 300);
             }
             
             if (mainPartnerElement) {
                 mainPartnerElement.style.opacity = '0';
                 setTimeout(() => {
                     mainPartnerElement.textContent = mainPartnerTypes[currentPartnerIndex];
                     mainPartnerElement.style.opacity = '1';
                 }, 300);
             }
         }

         // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
         document.addEventListener('DOMContentLoaded', function() {
             createCarousel();
             createCatalog();
             
             // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ–Ω—ã —Ç–µ–∫—Å—Ç–∞
             setInterval(animatePartnerType, 3000);
             
             console.log('üöÄ Peach Web App –∑–∞–≥—Ä—É–∂–µ–Ω (v0 –¥–∏–∑–∞–π–Ω –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω)');
         });
    </script>
</body>
</html>