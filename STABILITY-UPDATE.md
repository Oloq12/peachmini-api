# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ - 3 –ø–æ—Ç–æ–∫–∞ (Home/Chat/Create)

## –î–∞—Ç–∞: 2025-10-13

### ‚úÖ API Changes

#### 1. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–æ–≤
**–§–æ—Ä–º–∞—Ç:**
- ‚úÖ Success: `{ ok: true, data: {...} }`
- ‚ùå Error: `{ ok: false, error: "message", code: "ERROR_CODE" }`

#### 2. Endpoint `/api/girls`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è: `?limit=24&page=1`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (limit: 1-100, page: >0)
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ -created (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
- ‚úÖ –û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç: `{ girls, total, page, limit, hasMore }`

#### 3. Endpoint `/api/girls/:slug`
- ‚úÖ 404 –æ—à–∏–±–∫–∞ —Å `code: 'NOT_FOUND'`
- ‚úÖ –ü–æ–∏—Å–∫ —Å fallback: slug ‚Üí id
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

#### 4. Endpoint `/api/chat/reply`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è userId (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, string)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è girlId (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, string)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è userMsg (–Ω–µ –ø—É—Å—Ç–æ–π)
- ‚úÖ –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ –î—Ä—É–∂–µ–ª—é–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö:
  - `MISSING_USER_ID` - "User ID is required"
  - `MISSING_CHARACTER_ID` - "Character ID is required"
  - `EMPTY_MESSAGE` - "Message cannot be empty"
  - `AI_NOT_CONFIGURED` - "AI service is temporarily unavailable..."
  - `CHARACTER_NOT_FOUND` - "Character not found"
  - `TIMEOUT` - "The request took too long..."
  - `CHAT_FAIL` - "An error occurred while processing..."

#### 5. Endpoint `/api/persona/extract`
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è samples (–º–∏–Ω–∏–º—É–º 3 –ø—Ä–∏–º–µ—Ä–∞)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Array
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –ö–æ–¥—ã –æ—à–∏–±–æ–∫:
  - `INVALID_SAMPLES` - "Samples must be an array"
  - `INSUFFICIENT_SAMPLES` - "At least 3 dialog examples are required"
  - `AI_NOT_CONFIGURED` - "AI service is temporarily unavailable..."
  - `EXTRACTION_FAIL` - "Failed to extract persona..."

### ‚úÖ Frontend Changes

#### 1. Home —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ Skeleton grid (—É–∂–µ –±—ã–ª)
- ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –æ—à–∏–±–∫–∏
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë"
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ hasMore –∏–∑ API
- ‚úÖ Loading —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è pagination

#### 2. Character —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ disabled –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ —á–∞—Ç
- ‚úÖ Loading –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "‚è≥ –ü–µ—Ä–µ—Ö–æ–¥ –≤ —á–∞—Ç..."
- ‚úÖ –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –≤–Ω–∏–∑ –≤ —á–∞—Ç–µ (—É–∂–µ –±—ã–ª)

#### 3. Create —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (InspiredTab)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º—É–º 3 –ø—Ä–∏–º–µ—Ä–∞ (–±—ã–ª–æ 2, —Ç–µ–ø–µ—Ä—å 3)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã
- ‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (—É–∂–µ –±—ã–ª)
- ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –æ—à–∏–±–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ API

#### 4. –°–µ—Ä–≤–∏—Å—ã (pb.js)
- ‚úÖ `getCharacters(page, limit)` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- ‚úÖ `getCharacterBySlug(slug)` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ NOT_FOUND
- ‚úÖ `sendChatMessage()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –∏ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º API

### üì¶ Build

```bash
‚úì 65 modules transformed
dist/index.html                   1.44 kB ‚îÇ gzip:   0.84 kB
dist/assets/index-B436MOet.css    0.47 kB ‚îÇ gzip:   0.32 kB
dist/assets/index-PE-MOaRN.js   336.98 kB ‚îÇ gzip: 102.79 kB
‚úì built in 485ms
```

### üöÄ Deployment Ready

–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–æ–±—Ä–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é. –í—Å–µ 3 –ø–æ—Ç–æ–∫–∞ (Home/Chat/Create) —Å—Ç–∞–±–∏–ª—å–Ω—ã.

### üìã –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–æ—Ç–æ–∫–∏

1. **Home Flow** ‚úÖ
   - –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - Skeleton loading
   - Error handling
   - "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë" —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

2. **Chat Flow** ‚úÖ
   - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
   - Disabled –∫–Ω–æ–ø–∫–∞ –≤–æ –≤—Ä–µ–º—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
   - –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Ç–∞
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤

3. **Create Flow** ‚úÖ
   - –í–∞–ª–∏–¥–∞—Ü–∏—è 3+ –ø—Ä–∏–º–µ—Ä–æ–≤
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω—ã —á–µ—Ä–µ–∑ API
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
   - –ü–µ—Ä–µ—Ö–æ–¥ –≤ —á–∞—Ç

### üîß –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

**API:**
- `/api/index.js` - –≤—Å–µ endpoints –æ–±–Ω–æ–≤–ª–µ–Ω—ã

**Frontend:**
- `/peach-web/src/services/pb.js` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å–µ—Ä–≤–∏—Å—ã
- `/peach-web/src/pages/Home.jsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è
- `/peach-web/src/pages/Character.jsx` - disabled –∫–Ω–æ–ø–∫–∞
- `/peach-web/src/components/create/InspiredTab.jsx` - –≤–∞–ª–∏–¥–∞—Ü–∏—è 3+ –ø—Ä–∏–º–µ—Ä–æ–≤

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ

