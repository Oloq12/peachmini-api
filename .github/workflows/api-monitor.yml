name: API Health Monitor

on:
  schedule:
    # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
    - cron: '*/5 * * * *'
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  ping:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping API Health Endpoint
        run: |
          echo "üè• Pinging API health endpoint..."
          
          # Ping —Å —Ç–∞–π–º–∞—É—Ç–æ–º 10 —Å–µ–∫—É–Ω–¥
          if curl -fsSL --max-time 10 https://peachmini-api.vercel.app/api/health; then
            echo "‚úÖ API is UP"
            exit 0
          else
            echo "‚ùå API DOWN"
            exit 1
          fi
      
      - name: Notify on Failure
        if: failure()
        run: |
          echo "‚ö†Ô∏è API Health Check Failed!"
          echo "Timestamp: $(date -u '+%Y-%m-%d %H:%M:%S UTC')"
          # –í production –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Slack/Discord/Telegram notification

